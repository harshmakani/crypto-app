(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(63),o=r.n(i),s=(r(73),r(16)),c=r(13),l=r(64),u=r(30),d=r(28),h=r(29),p=(r(75),r(67)),b=r(40),m=r.n(b),v=r(42),S=r.n(v),f=r(10),g=r.n(f),y=r(41),E=r.n(y),w=r(31),k=r.n(w),O=r(39),j=r.n(O),z=r(32),B=r.n(z),N=r(15),T=r(65);var I=function(e){function t(){var e;Object(c.a)(this,t),e=Object(u.a)(this,Object(d.a)(t).call(this));var r=new WebSocket("wss://ws-feed.pro.coinbase.com");return r.addEventListener("open",function(){var e=JSON.stringify({type:"subscribe",product_ids:["BTC-USD"],channels:["level2"]});console.log("got open"),r.send(e)}),r.addEventListener("error",function(e){console.log("WebSocket Error "+e)}),r.addEventListener("close",function(){console.log("got close")}),r.addEventListener("message",function(e){var t=JSON.parse(e.data);switch(t.type){case"subscriptions":case"error":break;case"snapshot":this.emit("snapshot",t);break;case"l2update":this.emit("l2update",t)}}.bind(Object(N.a)(Object(N.a)(e)))),setTimeout(function(){r.close()},1e4),e}return Object(h.a)(t,e),t}(r.n(T).a),L=function e(t){var r=t.priceString,n=t.sizeString;Object(c.a)(this,e),this.priceString=r,this.sizeString=n,this.price=parseFloat(r),this.size=parseFloat(n)},A=function(e){function t(e){var r;return Object(c.a)(this,t),(r=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={orderBookSubscriber:new I,buy:[],sell:[]},r.state.orderBookSubscriber.on("snapshot",function(e){var t=e.asks.slice(0,100),n=e.bids.slice(0,100);r.provideSnapshot(n,t)}),r.state.orderBookSubscriber.on("l2update",function(e){r.provideL2Update(e),e.changes[0][0]}),r}return Object(h.a)(t,e),Object(l.a)(t,[{key:"provideSnapshot",value:function(e,t){var r=this,n=[],a=[];e.forEach(function(e){var t=Object(s.a)(e,2),a=t[0],i=t[1];r.insertSorted({orderArray:n,orderToInsert:new L({priceString:a,sizeString:i})})}),t.forEach(function(e){var t=Object(s.a)(e,2),n=t[0],i=t[1];r.insertSorted({orderArray:a,orderToInsert:new L({priceString:n,sizeString:i})})}),this.setState({buy:n,sell:a})}},{key:"provideL2Update",value:function(e){var t=this,r=this.state.buy,n=this.state.sell;e.changes.forEach(function(e){var a=Object(s.a)(e,3),i=a[0],o=a[1],c=a[2];switch(i){case"buy":if("0"===c)break;t.insertSorted({orderArray:r,orderToInsert:new L({priceString:o,sizeString:c})});var l=r.slice(0,50);console.log(l),t.setState({buy:l});break;case"sell":if("0"===c)break;t.insertSorted({orderArray:n,orderToInsert:new L({priceString:o,sizeString:c})});var u=n.slice(0,50);console.log(u),t.setState({sell:u})}})}},{key:"insertSorted",value:function(e){var t=e.orderArray,r=e.orderToInsert,n=!0,a=!1,i=void 0;try{for(var o,c=t.entries()[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var l=o.value,u=Object(s.a)(l,2),d=u[0],h=u[1];if(h&&r.price>h.price)return void t.splice(d,0,r)}}catch(p){a=!0,i=p}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}t.push(r)}},{key:"renderBuySell",value:function(e,t){var r=[];return e.map(function(e,n){return r.push(a.a.createElement(k.a,{key:n},a.a.createElement(g.a,{component:"th",scope:"row",className:t},e.priceString),a.a.createElement(g.a,{align:"right"},e.sizeString)))}),r}},{key:"render",value:function(){var e=this.props.classes,t=this.state,r=t.sell,n=t.buy;return a.a.createElement("div",{className:e.root},a.a.createElement(B.a,{container:!0,spacing:24},a.a.createElement(B.a,{item:!0,xs:!0},a.a.createElement(j.a,null,a.a.createElement(m.a,{className:e.table},a.a.createElement(E.a,null,a.a.createElement(k.a,null,a.a.createElement(g.a,{className:e.head},"Buy (Price)"),a.a.createElement(g.a,{align:"right"},"Size"))),a.a.createElement(S.a,null,this.renderBuySell(n,e.buy))))),a.a.createElement(B.a,{item:!0,xs:!0},a.a.createElement(j.a,null,a.a.createElement(m.a,{className:e.table},a.a.createElement(E.a,null,a.a.createElement(k.a,null,a.a.createElement(g.a,null,"Sell (Price)"),a.a.createElement(g.a,{align:"right"},"Size"))),a.a.createElement(S.a,null,this.renderBuySell(r,e.sell)))))))}}]),t}(n.Component),x=Object(p.withStyles)(function(e){return{root:{margin:3*e.spacing.unit},buy:{color:"#44be24"},sell:{color:"red"}}})(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},68:function(e,t,r){e.exports=r(153)},73:function(e,t,r){},75:function(e,t,r){}},[[68,2,1]]]);
//# sourceMappingURL=main.1ed380a7.chunk.js.map